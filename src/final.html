<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:url" content="https://nezalezhnist.team-911.com.ua" />
    <meta property="og:title" content="#–°–≤—è—Ç–∞–ó–∏–º–æ–≤–µ—Ä—à–Ω–∏–∫–∞" />
    <meta property="og:description" content="–ü–æ–≥—Ä–∞—î–º–æ?" />
    <meta property="og:image" content="https://zymovershnyk.fun/img/logo.svg" />
    <meta property="og:type" content="website" />
    <link rel="icon" href="https://static-00.iconduck.com/assets.00/santa-claus-emoji-emoji-1717x2048-2faxidf4.png" type="image/png">
    <title>–°–≤—è—Ç–∞ –ó–∏–º–æ–≤–µ—Ä—à–Ω–∏–∫–∞</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Caveat:wght@400;700&display=swap">
    <link rel="stylesheet" href="/styles/final.css">
</head>
<body>
    <div class="app">
        <div class="final-page">
            <div class="layer">
                <h2>–¢–∏ –ø—Ä–æ—Å—Ç–æ –∫–æ—Å–º–æ—Å!</h2>
                <p>–ó–∏–º–æ–≤–µ—Ä—à–Ω–∏–∫ –≤—Ä–∞–∂–µ–Ω–∏–π —Ç–≤–æ—î—é —à–≤–∏–¥–∫—ñ—Å—Ç—é —Ç–∞ —Å–ø—Ä–∏—Ç–Ω—ñ—Å—Ç—é.</p>
                
                <h2 class="champions-title">üèÜ –ù–∞—à—ñ —á–µ–º–ø—ñ–æ–Ω–∏: üèÜ</h2>
                <ul id="leaderboard">
                    <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å–Ω–∏–∫—ñ–≤ –±—É–¥–µ –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏—Å—è -->
                </ul>
                
                <p class="final-note">
                    <b>–§—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞—Ñ—ñ–∫—Å—É—î–º–æ 14 —Å—ñ—á–Ω—è –æ 12:00.</b>
                </p>
            </div>
        </div>
    </div>

    <script>
            
        const itemsPerPage = 25;
        let currentPage = 1;
        let participants = [];

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API
        function fetchParticipants() {
            fetch('https://api.zymovershnyk.fun/results.php', {
                method: 'GET'
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
                    if (data.status !== "success") {
                        throw new Error('–°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ —Å—Ç–∞—Ç—É—Å –ø–æ–º–∏–ª–∫–∏');
                    }

                    // –û–±—Ä–æ–±–∫–∞ –º–∞—Å–∏–≤—É –¥–∞–Ω–∏—Ö
                    participants = data.results.map((item, index) => ({
                        name: item.nickname,
                        time: item.result
                    }));

                    // –°–æ—Ä—Ç—É—î–º–æ —É—á–∞—Å–Ω–∏–∫—ñ–≤ –∑–∞ —á–∞—Å–æ–º –≤—ñ–¥ –Ω–∞–π–º–µ–Ω—à–æ–≥–æ –¥–æ –Ω–∞–π–±—ñ–ª—å—à–æ–≥–æ
                    participants.sort((a, b) => {
                        const timeA = a.time.split(':').reduce((acc, time) => (60 * acc) + +time);
                        const timeB = b.time.split(':').reduce((acc, time) => (60 * acc) + +time);
                        return timeA - timeB;
                    });

                    renderPage(currentPage);
                })
                .catch(error => {
                    console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –¥–∞–Ω–∏—Ö:', error);
                });
        }


        function renderPage(page) {
            const leaderboard = document.getElementById('leaderboard');
            leaderboard.innerHTML = ''; // –û—á–∏—â—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageParticipants = participants.slice(start, end);

            pageParticipants.forEach((participant, index) => {
                const li = document.createElement('li');
                li.textContent = `${start + index + 1}. ${participant.name} - ${participant.time}`;
                leaderboard.appendChild(li);
            });
        }

        window.onload = function() {
            console.log('Window loaded, fetching participants...'); // –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
            fetchParticipants(); 
        };

    </script>
</body>
</html>
